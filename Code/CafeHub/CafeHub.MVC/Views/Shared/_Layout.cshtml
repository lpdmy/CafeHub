<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>@ViewData["Title"] - CafeHub.MVC</title>
    <link rel="stylesheet" href="~/lib/bootstrap/dist/css/bootstrap.min.css" />
    <link rel="stylesheet" href="~/css/site.css" asp-append-version="true" />
    <link rel="stylesheet" href="~/CafeHub.MVC.styles.css" asp-append-version="true" />
        <!-- Meta -->
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">
        <meta name="description" content="">
        <meta name="keywords" content="">
        <meta name="author" content="Awaiken">
        <!-- Page Title -->
        <title>@ViewBag.Title</title>
        <!-- Favicon Icon -->
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" integrity="sha512-XYZ" crossorigin="anonymous" referrerpolicy="no-referrer" />

        <link rel="shortcut icon" type="~/image/x-icon" href="@Url.Content("~/images/favicon.png")">
        <!-- Google Fonts Css-->
        <link rel="preconnect" href="https://fonts.googleapis.com/">
        <link rel="preconnect" href="https://fonts.gstatic.com/" crossorigin>
        <link href="https://fonts.googleapis.com/css2?family=Forum&amp;family=Jost:ital,wght@0,100..900;1,100..900&amp;display=swap" rel="stylesheet">
        <!-- Bootstrap Css -->
        <link href="@Url.Content("~/css/bootstrap.min.css")" rel="stylesheet" media="screen">
        <!-- SlickNav Css -->
        <link href="@Url.Content("~/css/slicknav.min.css")" rel="stylesheet">
        <!-- Swiper Css -->
        <link rel="stylesheet" href="@Url.Content("~/css/swiper-bundle.min.css")">
        <!-- Font Awesome Icon Css-->
    <!-- FontAwesome CDN -->
    <link rel="stylesheet"
          href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">


        @* <link href="@Url.Content("~/css/all.min.css")" rel="stylesheet" asp-append-version="true" media="screen"> * *@
        <!-- Animated Css -->
        <link href="@Url.Content("~/css/animate.css")" rel="stylesheet">
        <!-- Magnific Popup Core Css File -->
        <link rel="stylesheet" href="@Url.Content("~/css/magnific-popup.css")">
        <!-- Mouse Cursor Css File -->
        <link rel="stylesheet" href="@Url.Content("~/css/mousecursor.css")">
        <!-- Main Custom Css -->
        <link href="@Url.Content("~/css/custom.css")" rel="stylesheet" media="screen">
        <style>
        /* Notification Button */
        .notification-container {
            position: relative;
            margin-left: 20px; /* Adjust positioning as needed */
        }

        #notificationButton {
            background-color: transparent;
            border: none;
            font-size: 20px;
            color: #fff;
            position: relative;
            cursor: pointer;
        }

        .notification-count {
            position: absolute;
            top: -7px;
            right: -5px;
            background-color: red;
            color: white;
            font-size: 12px;
            border-radius: 50%;
            width: 18px;
            height: 18px;
            text-align: center;
        }

        /* Dropdown Menu for Notifications */
        .notification-dropdown {
            display: none;
            position: absolute;
            top: 30px; /* Position below the notification button */
            right: 0;
            background-color: white;
            border: 1px solid #ddd;
            width: 250px;
            box-shadow: 0px 8px 16px rgba(0, 0, 0, 0.2);
            z-index: 1;
        }

        .notification-item {
            padding: 10px;
            border-bottom: 1px solid #ddd;
            cursor: pointer;
        }

            .notification-item:hover {
                background-color: #f1f1f1;
            }

        /* Show the dropdown when active */
        .notification-dropdown.show {
            display: block;
        }

        </style>
</head>
<body>
    <!-- Preloader Start -->
    <div class="preloader">
        <div class="loading-container">
            <div class="loading"></div>
            <div id="loading-icon"><img src="@Url.Content("~/images/loader.svg")" alt=""></div>
        </div>
    </div>
    <!-- Preloader End -->
    <!-- Topbar Section Start -->
    <div class="topbar">
        <div class="container">
            <div class="row align-items-center">
                <div class="col-md-9">
                    <div class="topbar-contact-info">
                        <ul>
                            <li><a href="mailto:info@domainname.com"><img src="@Url.Content("~/images/icon-mail.svg")" alt="">info@domainname.com</a></li>
                            <li><img src="@Url.Content("~/images/icon-location.svg")" alt="">8502 Preston Rd. Inglewood, Maine 98380</li>
                        </ul>
                    </div>
                </div>

                <div class="col-md-3">
                    <div class="topbar-social-links">
                        <ul>
                            <li><a href="#"><i class="fa-brands fa-instagram"></i></a></li>
                            <li><a href="#"><i class="fa-brands fa-facebook-f"></i></a></li>
                            <li><a href="#"><i class="fa-brands fa-dribbble"></i></a></li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!--header-->
    <header class="main-header">
        <div class="header-sticky">
            <nav class="navbar navbar-expand-lg">
                <div class="container">
                    <!-- Logo Start -->
                    <a class="navbar-brand" href="index-2.html">
                        <img src="~/images/logo.svg" alt="Logo">
                    </a>
                    <!-- Logo End -->
                    <!-- Main Menu Start -->
                    <div class="collapse navbar-collapse main-menu">
                        <div class="nav-menu-wrapper">
                            <ul class="navbar-nav mr-auto" id="menu">
                                <li class="nav-item submenu">
                                    <a class="nav-link" href="index-2.html">Home</a>
                                    <ul>
                                        <li class="nav-item"><a class="nav-link" href="index.html">Home - Main</a></li>
                                        <li class="nav-item"><a class="nav-link" href="index-video.html">Home - Video</a></li>
                                        <li class="nav-item"><a class="nav-link" href="index-slider.html">Home - Slider</a></li>
                                    </ul>
                                </li>
<<<<<<< HEAD
                                <li class="nav-item"><a class="nav-link" href="about.html">About Us</a></li>
                                @if (User.Identity.IsAuthenticated)
                                {
                                    if (User.IsInRole("Staff"))
                                    {
                                        <li class="nav-item">
                                            <a class="nav-link" asp-controller="OrderOffline" asp-action="Index">Service</a>
                                        </li>
                                    }
                                    else
                                    {
                                        <li class="nav-item">
                                            <a class="nav-link" href="services.html">Services</a>
                                        </li>
                                    }
                                }
                                else
                                {
                                    <li class="nav-item">
                                        <a class="nav-link" href="services.html">Services</a>
                                    </li>
                                }

                                
                                    @if (User.Identity.IsAuthenticated)
                                    {
                                        if (User.IsInRole("Admin"))
                                        {
                                            <li class="nav-item">
                                                <a class="nav-link" asp-controller="Products" asp-action="Index">Menu</a>
                                            </li>
                                        }
                                        else
                                        {
                                        <li class="nav-item"><a class="nav-link" asp-controller="Menu" asp-action="Index">Menu</a></li>
                                        }
                                    }
                                    else
                                    {
                                     <li class="nav-item"><a class="nav-link" asp-controller="Menu" asp-action="Index">Menu</a></li>
                                    }
                                

                                


=======
                                <li class="nav-item"><a class="nav-link" href="services.html">Services</a></li>
                                <li class="nav-item"><a class="nav-link" asp-controller="Menu" asp-action="Index">Menu</a></li>
                               
>>>>>>> 4d3dffdc4f3c4854f771fcb66da7f7145ab48ad0

                                <li class="nav-item submenu">
                                    <a class="nav-link" href="#">Pages</a>
                                    <ul>
                                        <li class="nav-item"><a class="nav-link" href="service-single.html">Service Details</a></li>
                                        <li class="nav-item"><a class="nav-link" href="blog.html">Blog</a></li>
                                        <li class="nav-item"><a class="nav-link" href="blog-single.html">Blog Details</a></li>
                                        <li class="nav-item"><a class="nav-link" href="projects.html">Projects</a></li>
                                        <li class="nav-item"><a class="nav-link" href="project-single.html">Project Details</a></li>
                                        <li class="nav-item"><a class="nav-link" href="team.html">Team</a></li>
                                        <li class="nav-item"><a class="nav-link" href="team-single.html">Team Details</a></li>
                                        <li class="nav-item"><a class="nav-link" href="image-gallery.html">Image Gallery</a></li>
                                        <li class="nav-item"><a class="nav-link" href="video-gallery.html">Video Gallery</a></li>
                                        <li class="nav-item"><a class="nav-link" href="faqs.html">FAQs</a></li>
                                        <li class="nav-item"><a class="nav-link" href="404.html">404</a></li>
                                    </ul>
                                </li>
                                <li class="nav-item"><a class="nav-link" href="contact.html">Contact Us</a></li>
                                <li class="nav-item highlighted-menu">
                                    <a class="nav-link" asp-controller="Account" asp-action="Login">Login</a>
                                </li>
                                @if (User.Identity.IsAuthenticated)
                                {
                                    <li class="nav-item">
                                        <div class="notification-container">
                                        <button id="notificationButton">
                                            <i class="fa fa-bell"></i>
                                            <span id="unreadCount" class="notification-count">0</span>
                                        </button>

                                        <div id="notificationDropdown" class="notification-dropdown">
                                            <div id="notificationList">
                                            </div>
                                        </div>
                                    </div>
                                </li>
                                }
                            </ul>
                        </div>

                        <!-- Header Button Box Start -->
                        <div class="header-button-box">
                            @if (User.Identity.IsAuthenticated)
                            {
                                if (User.IsInRole("Admin"))
                                {
                                    <a asp-controller="AdminUserDashboard" asp-action="ManageUser" class="btn-default btn-highlighted me-2">Dashboard</a>
                                    <a asp-controller="Account" asp-action="Logout" class="btn-default btn-highlighted">Logout</a>
                                } else
                                {
                                    <a asp-controller="Account" asp-action="CustomerProfile" class="btn-default btn-highlighted me-2">Profile</a>
                                    <a asp-controller="Account" asp-action="Logout" class="btn-default btn-highlighted">Logout</a>
                                }
                            }
                            else
                            {
                                <a asp-controller="Account" asp-action="Login" class="btn-default btn-highlighted me-2">Login</a>
                                <a asp-controller="Account" asp-action="Register" class="btn-default btn-highlighted">Register</a>
                            }

                            <!-- Header Btn End -->
                            <!-- Header Sidebar Btn Start -->
                            <div class="header-sidebar-btn">
                                <!-- Toggle Button trigger modal Start -->
                                <button class="btn btn-popup" type="button" data-bs-toggle="offcanvas" data-bs-target="#offcanvasRight" aria-controls="offcanvasRight"><img src="~/images/header-sidebar-btn.svg" alt=""></button>
                                <!-- Toggle Button trigger modal End -->
                                <!-- Header Sidebar Start -->
                                <div class="offcanvas offcanvas-end" tabindex="-1" id="offcanvasRight">
                                    <button type="button" class="btn-close" data-bs-dismiss="offcanvas" aria-label="Close"></button>

                                    <!-- Offcanvas Body Start -->
                                    <div class="offcanvas-body">
                                        <!-- Header Title Box Start -->
                                        <div class="header-title-box">
                                            <h2>welcome to roast coffee & tea</h2>
                                            <p>Vestibulum ante ipsum primis in faucibus orci luctus et ultrices posuere cubilia curae.</p>
                                        </div>
                                        <!-- Header Title Box End -->
                                        <!-- Header Sidebar Info Start -->
                                        <div class="header-sidebar-info">
                                            <h2><a href="tel:+123456789">+123 456 789</a></h2>
                                            <ul>
                                                <li>62 Big Tree St, Livonia, New York 14487, USA</li>
                                                <li><a href="mailto:info@domainname.com">info@domainname.com</a></li>
                                            </ul>
                                        </div>
                                        <!-- Header Sidebar Info End -->
                                        <!-- Header Sidebar Timing Start -->
                                        <div class="header-sidebar-timing">
                                            <ul>
                                                <li>Monday - Friday : 8.00am - 21.00pm</li>
                                                <li>Saturday - Sunday : 9.00am - 22.00pm</li>
                                                <li>Holiday : Closed</li>
                                            </ul>
                                        </div>
                                        <!-- Header Sidebar Timing End -->
                                        <!-- Header Sidebar Social List Start -->
                                        <div class="header-sidebar-social-list">
                                            <ul>
                                                <li><a href="#"><i class="fa-brands fa-instagram"></i></a></li>
                                                <li><a href="#"><i class="fa-brands fa-facebook-f"></i></a></li>
                                                <li><a href="#"><i class="fa-brands fa-dribbble"></i></a></li>
                                            </ul>
                                        </div>
                                        <!-- Header Sidebar Social List End -->
                                    </div>
                                    <!-- Offcanvas Body End -->
                                </div>
                                <!-- Header Sidebar End -->
                            </div>
                            <!-- Header Sidebar Btn End -->
                        </div>
                        <!-- Header Button Box End -->
                    </div>
                    <!-- Main Menu End -->
                    <div class="navbar-toggle"></div>
                </div>
            </nav>
            <div class="responsive-menu"></div>
        </div>
    </header>
    @* <div class="container">
        <main role="main" class="pb-3"> *@
            @RenderBody()
       @*  </main>
    </div> *@

    <footer class="main-footer parallaxie">
        <div class="container">
            <div class="row">
                <div class="col-lg-12">
                    <!-- Footer Contact List Start -->
                    <div class="footer-contact-list">
                        <!-- Footer Contact Item Start -->
                        <div class="footer-contact-item">
                            <div class="icon-box">
                                <img src="@Url.Content("~/images/icon-phone-accent.svg")" alt="Phone">
                            </div>
                            <div class="footer-contact-detail">
                                <h3>Contact Us</h3>
                                <p>T. <a href="tel:+123456789">+123 456 789</a></p>
                                <p>M. <a href="mailto:info@domainname.com">info@domainname.com</a></p>
                            </div>
                            <div class="footer-contact-button">
                                <a href="@Url.Action("Contact", "Home")" class="btn-default btn-highlighted">Contact Us</a>
                            </div>
                        </div>
                        <!-- Footer Contact Item End -->
                        <!-- Footer Contact Item Start -->
                        <div class="footer-contact-item">
                            <div class="icon-box">
                                <img src="@Url.Content("~/images/icon-location-accent.svg")" alt="Location">
                            </div>
                            <div class="footer-contact-detail">
                                <h3>Address</h3>
                                <p>29721 Westheimer Road, Santa Ana, Illinois 85486</p>
                            </div>
                            <div class="footer-contact-button">
                                <a href="@Url.Action("Contact", "Home")" class="btn-default btn-highlighted">Get Direction</a>
                            </div>
                        </div>
                        <!-- Footer Contact Item End -->
                        <!-- Footer Contact Item Start -->
                        <div class="footer-contact-item">
                            <div class="icon-box">
                                <img src="@Url.Content("~/images/icon-clock-accent.svg")" alt="Clock">
                            </div>
                            <div class="footer-contact-detail">
                                <h3>Opening Hours</h3>
                                <p>Everyday: From 12.30 To 23.00</p>
                                <p>Kitchen Closes At 22.00</p>
                            </div>
                            <div class="footer-contact-button">
                                <a href="@Url.Action("BookTable", "Home")" class="btn-default btn-highlighted">Reserve a Table</a>
                            </div>
                        </div>
                        <!-- Footer Contact Item End -->
                    </div>
                    <!-- Footer Contact List End -->
                </div>

                <div class="col-lg-12">
                    <!-- Footer Copyright Start -->
                    <div class="footer-copyright">
                        <!-- Footer Copyright Text Start -->
                        <div class="footer-copyright-text order-md-1 order-3">
                            <p>Copyright © 2025 All Rights Reserved.</p>
                        </div>
                        <!-- Footer Copyright Text End -->
                        <!-- Footer Logo Start -->
                        <div class="footer-logo order-md-2 order-1">
                            <img src="@Url.Content("~/images/footer-logo.svg")" alt="Footer Logo">
                        </div>
                        <!-- Footer Logo End -->
                        <!-- Footer Social Links Start -->
                        <div class="footer-social-links order-md-3 order-2">
                            <ul>
                                <li><a href="#"><i class="fa-brands fa-instagram"></i></a></li>
                                <li><a href="#"><i class="fa-brands fa-facebook-f"></i></a></li>
                                <li><a href="#"><i class="fa-brands fa-dribbble"></i></a></li>
                            </ul>
                        </div>
                        <!-- Footer Social Links End -->
                    </div>
                    <!-- Footer Copyright End -->
                </div>
            </div>
        </div>
    </footer>
    <script src="~/lib/jquery/dist/jquery.min.js"></script>
    <script src="~/lib/bootstrap/dist/js/bootstrap.bundle.min.js"></script>
    <script src="~/js/site.js" asp-append-version="true"></script>
    @await RenderSectionAsync("Scripts", required: false)
    <!-- Main Footer Section End -->
    <!-- Jquery Library File -->
    <script src="~/js/jquery-3.7.1.min.js" asp-append-version="true"></script>
    <!-- Bootstrap js file -->
    <script src="~/js/bootstrap.min.js" asp-append-version="true"></script>
    <!-- Validator js file -->
    <script src="~/js/validator.min.js" asp-append-version="true"></script>
    <!-- SlickNav js file -->
    <script src="~/js/jquery.slicknav.js" asp-append-version="true"></script>
    <!-- Swiper js file -->
    <script src="~/js/swiper-bundle.min.js" asp-append-version="true"></script>
    <!-- Counter js file -->
    <script src="~/js/jquery.waypoints.min.js" asp-append-version="true"></script>
    <script src="~/js/jquery.counterup.min.js" asp-append-version="true"></script>
    <!-- Isotop js file -->
    <script src="~/js/isotope.min.js" asp-append-version="true"></script>
    <!-- Magnific js file -->
    <script src="~/js/jquery.magnific-popup.min.js" asp-append-version="true"></script>
    <!-- SmoothScroll -->
    <script src="~/js/SmoothScroll.js" asp-append-version="true"></script>
    <!-- Parallax js -->
    <script src="~/js/parallaxie.js" asp-append-version="true"></script>
    <!-- MagicCursor js file -->
    <script src="~/js/gsap.min.js" asp-append-version="true"></script>
    <script src="~/js/magiccursor.js" asp-append-version="true"></script>
    <!-- Text Effect js file -->
    <script src="~/js/SplitText.js" asp-append-version="true"></script>
    <script src="~/js/ScrollTrigger.min.js" asp-append-version="true"></script>
    <!-- YTPlayer js File -->
    <script src="~/js/jquery.mb.YTPlayer.min.js" asp-append-version="true"></script>
    <!-- Wow js file -->
    <script src="~/js/wow.min.js" asp-append-version="true"></script>
    <!-- Main Custom js file -->
    <script src="~/js/function.js" asp-append-version="true"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/microsoft-signalr/7.0.5/signalr.min.js"></script>
    <script>
        document.addEventListener("DOMContentLoaded", function () {
            let notifications = [
                { title: "New Comment", content: "Someone commented on your post.", status: "Unseen", url: "/Home", createdAt: new Date() },
                { title: "System Update", content: "A new update is available for your app.", status: "Unseen", url: "/Home", createdAt: new Date() },
                { title: "Message", content: "You have a new message from John.", status: "Unseen", url: "/Home", createdAt: new Date() }
            ];
            const notificationListElement = document.getElementById("notificationList");
            const unreadCountElement = document.getElementById("unreadCount");
            const notificationDropdown = document.getElementById("notificationDropdown");
            const notificationButton = document.getElementById("notificationButton"); // Lấy phần tử nút

            // Kết nối SignalR và các sự kiện khác sau khi DOM được tải
            const connection = new signalR.HubConnectionBuilder()
                .withUrl("/notificationHub")
                .configureLogging(signalR.LogLevel.Information)
                .withAutomaticReconnect()  
                .build();

            // Các hàm xử lý sự kiện khác
            function renderNotifications() {
              
                notificationListElement.innerHTML = "";
                notifications.forEach((notification, index) => {
                    const notificationItem = document.createElement("div");
                    notificationItem.classList.add("notification-item");
                    notificationItem.setAttribute('data-index', index);

                    // Format the date and display time of creation
                    const notificationTime = new Date(notification.createdAt).toLocaleString();

                    notificationItem.innerHTML = `
                        <strong>${notification.title}</strong><br>
                        ${notification.content}<br>
                        <small>Received at: ${notificationTime}</small>
                    `;

                    // Add click event to mark as 'Seen' and redirect to the URL
                    notificationItem.onclick = function () {
                        notification.status = "Seen";
                        notificationItem.style.backgroundColor = "#f0f0f0";
                        updateUnreadCount();

                        // Redirect to the notification URL (if exists)
                        if (notification.url) {
                            window.location.href = notification.url;
                        }
                    };

                    notificationListElement.appendChild(notificationItem);
                });

                updateUnreadCount();
            }

            function updateUnreadCount() {
                const unreadNotifications = notifications.filter(notification => notification.status === "Unseen");
                unreadCountElement.textContent = unreadNotifications.length;
            }

            function toggleNotificationDropdown() {
                notificationDropdown.classList.toggle('show');
            }

            // Gán sự kiện onclick cho nút
            notificationButton.addEventListener("click", toggleNotificationDropdown);

            connection.start().then(() => {
                console.log("SignalR connected.");

                connection.on("ReceiveMessage", function (notification) {
                    notifications.push(notification);
                    renderNotifications();
                });
            }).catch(err => {
                console.error("Error connecting to SignalR: ", err);
            });

            connection.start().catch(function (err) {
                console.error('Error while starting the connection: ' + err);
            });

            connection.onclose(function (err) {
                console.error('Connection closed. Attempting to reconnect...');
                // Optionally try to reconnect here
            });
        });
    </script>


</body>
</html>
